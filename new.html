<title>Just Read 2.0!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="simple.svg">
<script src="random.js"></script>
<script src="swipe.js"></script>
<script>
var i = 0;
const urlParams = new URLSearchParams(window.location.search);

function injectText(index, text) {
    document.body.innerHTML = text;
    i = index;
    window.history.replaceState(null, null, `?index=${index}`);
}

if(urlParams.has("index")) {
    i = urlParams.get("index");
    getSentence(i, injectText);
} else {
    getFirstSentence(injectText);
}

document.addEventListener("keydown", function(e) {
    if(e.code == "ArrowLeft" || e.code == "ArrowUp") {
        getPreviousSentence(i, injectText);
    } else if(e.code == "ArrowRight" || e.code == "ArrowDown") {
        getNextSentence(i, injectText);
    } else if(e.code == "Space") {
        getRandomSentence(injectText);
    }
});

window.addEventListener("load", function(event) {
        
    const dispatcher = new SwipeEventDispatcher(document.body);

    dispatcher.on('SWIPE_UP', () => { 
        console.log('I swiped up!');
        getPreviousSentence(i, injectText);
    });

    dispatcher.on('SWIPE_DOWN', () => {
        console.log('I swiped down!');
        getNextSentence(i, injectText);
});

});

// document.addEventListener("wheel", function(e) {
//     if(e.deltaY > 0)
//         getNextSentence(i, injectText);
//     else if(e.deltaY < 0)
//         getPreviousSentence(i, injectText);
// });
</script>
<style>
body {
    font-family: "SF Pro Display","SF Pro Icons","Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size: xx-large;
    font-weight: 600;
    letter-spacing: -.009em;
}
</style>
